# Sky Editor - 专业天体摄影图像处理工具

一个专为天体摄影爱好者和专业摄影师设计的图像处理工具，集成了 Camera Raw 处理和星空图像堆叠功能，支持多种图像格式的专业级处理。

## ✨ 主要亮点

- 🌟 **专业星空堆叠** - 智能星点检测和对齐，支持多种堆叠算法，显著降低噪点
- 📸 **Camera Raw 处理** - 完整的 RAW 文件处理流程，支持曝光、色彩、锐化等专业调整
- 🚀 **高性能处理** - 优化的图像处理引擎，支持大尺寸天体摄影图像
- 🎨 **现代化界面** - 基于 Tkinter 的直观界面，简洁的操作流程和丰富的功能

## 📚 详细文档

- 📖 **[Camera Raw 用户使用手册](docs/CAMERA_RAW_GUIDE.md)** - 专业的 RAW 图像处理功能详细说明，包含基础调整、色彩校正、天体摄影专用功能等
- 🌟 **[星空图像堆叠功能指南](docs/STACKING_GUIDE.md)** - 完整的星空图像堆叠使用说明，涵盖参数设置、算法选择、拍摄技巧等
- 🔧 **[安装与打包指南](docs/INSTALL_BUILD.md)** - 详细的安装、打包和异常问题处理说明手册

## 功能特性

### 🌟 星空图像堆叠
- **智能星点检测**: 先进的计算机视觉算法，精确识别图像中的星点特征
- **自动对齐**: 智能检测星点，自动对齐有偏移的星空图片
- **多种堆叠算法**: 支持平均、中位数、最大值和 Sigma 裁剪等堆叠方法
- **噪点抑制**: 通过多张图像堆叠显著降低噪点，提高图像质量
- **参数调优**: 丰富的参数设置，适应不同拍摄条件和图像质量
- **批量处理**: 支持一次性处理大量星空图像
- **专业输出**: 支持高质量 TIFF 和 PNG 格式输出

### 📸 Camera Raw 处理
- **RAW 格式支持**: 支持主流相机的 RAW 格式文件
- **曝光调整**: 精确的曝光、高光、阴影控制
- **色彩校正**: 色温、色调、饱和度、自然饱和度调整
- **细节增强**: 锐化、噪点降低、清晰度调整
- **色调映射**: 高光、阴影分离调整
- **预设管理**: 保存和加载自定义处理预设
- **实时预览**: 所有调整实时显示效果
- **专业输出**: 支持多种格式和质量设置

### 🖼️ 支持的图像格式
- **RAW 格式**: ARW, CR2, NEF, DNG 等主流相机 RAW 格式
- **常见格式**: JPG, JPEG, PNG, GIF, BMP
- **高级格式**: TIFF, WebP, HEIC
- **天体摄影**: FITS 格式支持（计划中）

### 📁 文件管理
- **批量导入**: 支持一次选择多个图像文件
- **文件夹扫描**: 递归扫描文件夹中的所有图像
- **拖拽支持**: 支持拖拽文件和文件夹到应用程序
- **项目管理**: 保存和加载处理项目
- **历史记录**: 处理历史和撤销/重做功能

### ⌨️ 快捷键支持
- **Ctrl+O**: 打开文件/文件夹
- **Ctrl+S**: 保存当前处理结果
- **Ctrl+Z**: 撤销操作
- **Ctrl+Y**: 重做操作
- **Ctrl+Q**: 退出应用程序
- **F11**: 切换全屏模式
- **Space**: 下一张图像
- **Backspace**: 上一张图像
- **Ctrl+Plus**: 放大图像
- **Ctrl+Minus**: 缩小图像
- **Ctrl+0**: 适应窗口大小
- **Ctrl+1**: 1:1 显示

### 🔧 界面功能
- **多标签页**: 支持同时处理多个项目
- **实时预览**: 所有调整实时显示效果
- **参数面板**: 直观的滑块和数值输入控制
- **状态栏**: 实时显示处理进度和系统状态
- **工具栏**: 快速访问常用功能
- **响应式设计**: 自适应不同屏幕尺寸

### 🎯 专业特性
- **批量处理**: 支持批量应用相同的处理参数
- **预设系统**: 保存和分享处理预设
- **处理历史**: 完整的操作历史记录
- **质量控制**: 多种输出质量和格式选项
- **性能优化**: 多线程处理，充分利用系统资源
- **内存管理**: 智能内存使用，支持大尺寸图像


## 故障排除

### 常见问题

**Q: 程序启动失败**
A: 
- 检查 Python 版本（需要 3.8+）
- 确保已安装所有依赖：`pip install -r requirements.txt`
- 检查系统权限设置

**Q: RAW 文件无法处理**
A: 
- 确保已安装 `rawpy` 包
- 检查 RAW 文件格式是否支持
- 尝试更新 rawpy 到最新版本

**Q: 星空堆叠处理缓慢**
A: 
- 减少输入图像数量
- 降低图像分辨率
- 确保有足够的可用内存（建议 16GB+）
- 关闭其他占用资源的程序

**Q: 界面显示异常**
A: 
- 检查显示缩放设置
- 更新显卡驱动程序
- 尝试以管理员权限运行

### 性能建议
- **内存**: 推荐 16GB+ 用于处理大尺寸天体摄影图像
- **存储**: 使用 SSD 可显著提升处理速度
- **CPU**: 多核处理器可提升堆叠和批处理性能
- **显卡**: 支持 OpenGL 3.3+ 可启用硬件加速

## 系统兼容性

### 支持平台
- **Windows**: 10/11 (x64)
- **macOS**: 10.15+ (Intel/Apple Silicon)
- **Linux**: Ubuntu 20.04+, CentOS 8+

### 依赖要求
- **Python**: 3.8 - 3.11 (内置 Tkinter)
- **OpenCV**: 4.5+
- **NumPy**: 1.21+
- **Pillow**: 9.0+
- **rawpy**: 0.18+

### 硬件要求
- **CPU**: 四核以上处理器（推荐）
- **内存**: 最低 8GB，推荐 16GB+
- **存储**: 至少 2GB 可用空间
- **显卡**: 支持 OpenGL 3.3+（可选）

## 开发信息

- **开发语言**: Python 3.8+
- **GUI框架**: PyQt6
- **图片处理**: OpenCV + scikit-image
- **RAW格式支持**: rawpy + numpy
- **并发处理**: 多线程异步处理
- **许可证**: MIT License

### 技术架构
- **前端**: PyQt6 专业界面
- **后端**: 高性能图像处理引擎
- **存储**: 智能缓存 + 项目管理
- **优化**: GPU加速 + 内存优化

## 更新日志

### v2.0.0 🔥 **重大更新**
- **RAW格式支持**: 新增ARW格式支持，专为摄影师优化
- **超快加载**: ARW文件加载速度提升80-90%，支持快速缩略图提取
- **智能Loading**: 大图片预览时显示优雅的旋转加载动画
- **异步多线程**: 完全重构加载机制，界面始终保持响应
- **图片旋转**: 新增90°旋转功能，支持快速调整图片方向
- **增量更新**: 缩略图加载完成后自动替换，无需重建整个视图
- **智能队列**: 按文件大小排序，小文件优先显示
- **错误恢复**: 完善的异常处理，单个文件失败不影响整体加载
- **性能监控**: 实时显示加载时间和进度统计

### v1.2.0
- 新增鼠标拖拽功能，可拖拽查看图片细节
- 智能光标切换，放大时显示手型光标
- 优化界面布局，缩小左侧列表宽度，扩大预览区域
- 改进用户体验，更直观的图片浏览操作

### v1.1.0
- 新增图片缩放功能
- 支持放大、缩小、适应窗口、1:1显示
- 添加缩放控制工具栏
- 支持Ctrl+鼠标滚轮缩放
- 缩放后可滚动查看图片不同区域

### v1.0.0
- 初始版本发布
- 支持多种图片格式
- 网格和列表两种查看模式
- 全屏预览功能
- 基本的图片管理功能

---

## 🎯 适用场景

- **摄影师**: 快速预览和筛选大量RAW文件
- **设计师**: 批量查看设计素材和图片资源
- **普通用户**: 整理和浏览个人照片收藏
- **开发者**: 查看项目中的图片资源文件

## 📦 打包分发

### Mac 应用程序打包

项目提供了完整的 Mac 应用程序打包方案：

```bash
# 自动化打包（推荐）
./build_app.sh

# 快速打包
./build_simple.sh

# 手动打包
pyinstaller sky_editor.spec
```

**打包结果**：
- 应用程序包：`dist/Sky Editor.app`
- 应用大小：约 55MB
- 支持 macOS 10.12+

**安装方式**：
1. 直接运行：`open "dist/Sky Editor.app"`
2. 拖拽到应用程序文件夹
3. 创建桌面快捷方式

详细说明请参考：
- [打包指南](BUILD.md) - 完整的打包流程和配置
- [安装指南](INSTALL.md) - 应用程序安装和使用

### 分发特性

- ✅ **独立运行**：无需安装 Python 环境
- ✅ **完整功能**：包含所有依赖库
- ✅ **原生体验**：标准 Mac 应用程序
- ✅ **文件关联**：支持图片格式关联
- ✅ **高分辨率**：支持 Retina 显示屏

---

## 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 联系我们

- **项目主页**: https://github.com/mailguest/sky_editor
- **问题反馈**: https://github.com/mailguest/sky_editor/issues
- **讨论交流**: https://github.com/mailguest/sky_editor/discussions

---

如果您觉得这个项目有用，请给我们一个 ⭐ Star！您的支持是我们持续改进的动力。